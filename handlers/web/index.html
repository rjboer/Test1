<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Boards - Miro style demo</title>
        <link rel="stylesheet" href="/static/styles.css" />
</head>
<body data-board-id="{{.BoardID}}">
        <header class="topbar">
                <div class="topbar-left">
                        <div class="brand">Boards</div>
                        <div class="mode-toggle">
                                <button data-mode="miro" class="active" type="button">Boarding</button>
                                <button data-mode="causal" type="button">Causal map</button>
                        </div>
                </div>
                <div class="toolbar-group">
                        <div class="toolbar" id="miro-toolbar">
                                <button data-tool="pan" class="active">Pan</button>
                                <button data-tool="select">Select</button>
                                <button data-tool="pen">Pen</button>
                                <button data-tool="rectangle">Rectangle</button>
                                <button data-tool="ellipse">Ellipse</button>
                                <button data-tool="text">Text</button>
                                <button data-tool="note">Sticky</button>
                                <button data-tool="connector">Connector</button>
                                <button data-tool="comment">Comment</button>
                        </div>
                        <div class="toolbar" id="causal-toolbar" hidden>
                                <button data-tool="pan" class="active">Pan</button>
                                <button data-tool="select">Select</button>
                                <button data-tool="causal-node">Causal node</button>
                                <button data-tool="causal-link">Causal link</button>
                                <button data-tool="comment">Comment</button>
                        </div>
                </div>
                <div class="actions">
                        <button id="delete-selection" type="button">Delete</button>
                        <button id="open-settings" type="button">Settings</button>
                </div>
                <div class="status" id="status">Ready</div>
        </header>
        <main class="layout">
                <section class="board-area">
                        <canvas id="board-canvas"></canvas>
                        <div class="hint">
                                Scroll to zoom · Drag in Pan mode to move · Double click a text/note to edit · Live cursors are shown with colored pins
                        </div>
                </section>
                <aside class="side-panel">
                        <h3>Board details</h3>
                        <div id="board-meta" class="meta"></div>
                        <div class="palette" id="domain-palette">
                                <h4>Domain palette</h4>
                                <p class="palette-hint">Pick a category and drop structured blocks for the causal map.</p>
                                <div class="palette-groups" id="palette-groups"></div>
                        </div>
                        <div class="templates" id="template-panel">
                                <h4>Templates</h4>
                                <div class="template-picker">
                                        <label for="template-select">Pick a snippet</label>
                                        <select id="template-select"></select>
                                        <div id="template-description" class="template-description">Select a template to preview details.</div>
                                        <button id="template-insert" type="button">Place template</button>
                                        <p class="template-hint">Click the board to drop the chosen template at your cursor.</p>
                                </div>
                        </div>
                        <div class="layout-controls">
                                <h4>Layout</h4>
                                <button id="auto-layout" type="button">Auto layout causal map</button>
                                <div class="group-controls">
                                        <label for="group-name">Assign group or swimlane</label>
                                        <input id="group-name" list="group-suggestions" placeholder="e.g. Discovery" />
                                        <datalist id="group-suggestions"></datalist>
                                        <button id="apply-group" type="button">Apply to selection</button>
                                        <p class="layout-hint">Select causal nodes, set a group, then apply auto layout.</p>
                                </div>
                        </div>
                        <div class="legend">
                                <h4>Legend</h4>
                                <ul>
                                        <li>Rectangle/Ellipse: click + drag</li>
                                        <li>Pen: freehand draw while dragging</li>
                                        <li>Sticky/Text: click to place, double click to edit</li>
                                        <li>Connector: click + drag between two points</li>
                                        <li>Causal node: click to drop a circle, double click to edit</li>
                                        <li>Causal link: drag between nodes, edit polarity/weight on select</li>
                                        <li>Comment: click to drop pin, click pin to edit or delete</li>
                                        <li>Pan/Zoom: use pan tool + wheel</li>
                                </ul>
                        </div>
                </aside>
        </main>
        <div class="modal" id="settings-modal" aria-hidden="true">
                <div class="modal-backdrop" id="settings-dismiss"></div>
                <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="settings-title">
                        <div class="modal-header">
                                <h3 id="settings-title">Settings</h3>
                                <button id="close-settings" class="icon-button" type="button" aria-label="Close settings">×</button>
                        </div>
                        <p class="modal-subtitle">Tune drawing defaults, snapping behavior, and how your cursor appears to others.</p>
                        <form id="settings-form" class="settings-grid">
                                <div class="field">
                                        <label for="cursor-label">Cursor label</label>
                                        <input id="cursor-label" name="cursorLabel" type="text" autocomplete="off" />
                                </div>
                                <div class="field">
                                        <label for="cursor-color">Cursor color</label>
                                        <input id="cursor-color" name="cursorColor" type="color" />
                                </div>
                                <div class="field">
                                        <label for="stroke-width">Pen width</label>
                                        <input id="stroke-width" name="strokeWidth" type="number" min="1" step="1" />
                                </div>
                                <div class="field">
                                        <label for="stroke-smoothing">Pen smoothing</label>
                                        <input id="stroke-smoothing" name="strokeSmoothing" type="range" min="0" max="1" step="0.05" />
                                </div>
                                <div class="field">
                                        <label for="connector-color">Connector color</label>
                                        <input id="connector-color" name="connectorColor" type="color" />
                                </div>
                                <div class="field">
                                        <label for="connector-width">Connector width</label>
                                        <input id="connector-width" name="connectorWidth" type="number" min="1" step="1" />
                                </div>
                                <div class="field">
                                        <label for="connector-label">Default connector label</label>
                                        <input id="connector-label" name="connectorLabel" type="text" autocomplete="off" />
                                </div>
                                <div class="field toggle">
                                        <label for="snap-to-anchors">Snap connectors to shapes</label>
                                        <input id="snap-to-anchors" name="snapToAnchors" type="checkbox" />
                                </div>
                                <div class="field">
                                        <label for="snap-tolerance">Snap tolerance (px)</label>
                                        <input id="snap-tolerance" name="snapTolerance" type="number" min="0" step="1" />
                                </div>
                                <div class="field">
                                        <label for="causal-weight-cutoff">Causal weight notation cutoff</label>
                                        <input
                                                id="causal-weight-cutoff"
                                                name="causalWeightScientificCutoff"
                                                type="number"
                                                min="0"
                                                step="0.0001"
                                        />
                                        <p class="field-hint">Switch link weights to scientific notation below this absolute value.</p>
                                </div>
                        </form>
                        <div class="modal-footer">
                                <div id="settings-summary" class="settings-summary"></div>
                                <div class="modal-actions">
                                        <button id="reset-settings" type="button" class="ghost">Reset to defaults</button>
                                        <button id="close-settings-footer" type="button">Done</button>
                                </div>
                        </div>
                </div>
        </div>
        <script type="module" src="/static/app.js"></script>
</body>
</html>
